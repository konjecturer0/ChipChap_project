{"ast":null,"code":"var _jsxFileName = \"/home/vladic4t/Desktop/mydev/ChiChapProject/chipchap/src/components/App.js\";\nimport React from 'react'; // MicroComponents\n\nimport NewChat from '../components/buttons/NewChat';\nimport ChatHead from '../components/ChatsHead'; // Components\n\nimport Contacts from '../components/Contacts';\nimport Chat from '../components/MainChat/Chat'; // Styles\n\nimport Container from '../styles/App/container.tw'; // Autobahn\n\nimport autobahn from 'autobahn';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userSelect: '',\n      users: [],\n      filterChat: ''\n    };\n\n    this.componentDidMount = () => {\n      let connection = new autobahn.Connection({\n        transports: [{\n          type: \"websocket\",\n          url: 'ws://192.168.2.115:8080'\n        }],\n        realm: 'chat'\n      });\n\n      connection.onopen = function (session, details) {\n        console.log(\"!! Got a connection\");\n        console.log(session);\n        console.log(details);\n        this.sess = session;\n        this.sess.call('com.chipchap.session.user.actions:contacts').then(function (result) {\n          // console.log(result[0]);\n          this.setState({\n            users: [...result]\n          });\n        }, function (error) {\n          console.log(\"!!ERROR: \" + error);\n        });\n      };\n\n      connection.onclose = function (session, details) {\n        console.log(session, details);\n      };\n\n      connection.open();\n    };\n\n    this.toggleChat = user => {\n      this.setState({\n        userSelect: user.id\n      });\n    };\n\n    this.selectUserChat = users => {\n      for (let i = 0; i < users.length; i++) {\n        if (users[i].id === this.state.userSelect) {\n          return users[i];\n        }\n      }\n    };\n\n    this.onSearch = e => {\n      let value = e.target.value;\n      this.setState({\n        filterChat: value\n      });\n    };\n\n    this.sess = null;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        borderColor: '#E6E5EA'\n      },\n      className: \"w-2/6 inline-flex flex-col align-top border-r h-screen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-6 text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(NewChat, {\n      onClick: e => alert('For demonstration purposes, you can chat though'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(ChatHead, {\n      onSearch: this.onSearch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"py-2 overflow-y-scroll\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Contacts, {\n      filter: this.state.filterChat,\n      users: this.state.users,\n      onToggleChat: this.toggleChat,\n      user: this.state.userSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-4/6 inline-flex flex-col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Chat, {\n      user: this.selectUserChat(this.state.users),\n      session: this.session,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/vladic4t/Desktop/mydev/ChiChapProject/chipchap/src/components/App.js"],"names":["React","NewChat","ChatHead","Contacts","Chat","Container","autobahn","App","Component","constructor","props","state","userSelect","users","filterChat","componentDidMount","connection","Connection","transports","type","url","realm","onopen","session","details","console","log","sess","call","then","result","setState","error","onclose","open","toggleChat","user","id","selectUserChat","i","length","onSearch","e","value","target","render","borderColor","alert"],"mappings":"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","sourcesContent":["import React from 'react';\n\n// MicroComponents\nimport NewChat from '../components/buttons/NewChat';\nimport ChatHead from '../components/ChatsHead';\n\n// Components\nimport Contacts from '../components/Contacts';\nimport Chat from '../components/MainChat/Chat';\n\n// Styles\nimport Container from '../styles/App/container.tw';\n\n// Autobahn\nimport autobahn from 'autobahn';\n\nclass App extends React.Component {\n    \n    state = {\n        userSelect: '',\n        users: [],\n        filterChat: '',\n    };\n\n    constructor(props) {\n        super(props);\n        this.sess = null;\n    }\n\n    componentDidMount = () => {\n        let connection = new autobahn.Connection({transports:[{type:\"websocket\", url: 'ws://192.168.2.115:8080'}], realm: 'chat'});\n        connection.onopen = function(session, details) {\n            console.log(\"!! Got a connection\");\n            console.log(session);\n            console.log(details);\n            this.sess = session;\n            this.sess.call('com.chipchap.session.user.actions:contacts').then(\n                function(result) {\n                    // console.log(result[0]);\n                    this.setState({users: [ ...result]});\n                },\n                function(error) {\n                    console.log(\"!!ERROR: \"+error);\n                }\n            )\n        }\n        connection.onclose = function(session, details) {\n            console.log(session, details);\n        }\n        connection.open();\n    }\n\n    toggleChat = (user) => {\n        this.setState({userSelect: user.id});\n    }\n\n    selectUserChat = (users) => {\n        for (let i=0; i < users.length; i++) {\n            if (users[i].id === this.state.userSelect) {\n                return users[i];\n            }\n        }\n    }\n\n    onSearch = (e) => {\n        let value = e.target.value;\n        this.setState({filterChat: value});\n    }\n\n    render() {\n        return (\n            <Container>\n                <div style={{borderColor: '#E6E5EA'}} className=\"w-2/6 inline-flex flex-col align-top border-r h-screen\">\n                    {/******** BUTTON NEW CONVERSATION *****/}\n                    <div className=\"py-6 text-center\">\n                        <NewChat onClick={(e) => alert('For demonstration purposes, you can chat though')} />\n                    </div>\n                    {/******** CHATS & SEARCH *****/}\n                    <div className=\"py-2\">\n                        <ChatHead onSearch={this.onSearch} />\n                    </div>\n                    {/******** CONTACTS SECTION *****/}\n                    <div className=\"py-2 overflow-y-scroll\">\n                        <Contacts filter={this.state.filterChat} users={this.state.users} onToggleChat={this.toggleChat} user={this.state.userSelect} />\n                    </div>\n                </div>\n                <div className=\"w-4/6 inline-flex flex-col\">\n                    {/*****  CHAT  *****/}\n                    <Chat user={this.selectUserChat(this.state.users)} session={this.session} />\n                </div>\n            </Container>\n        );\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}